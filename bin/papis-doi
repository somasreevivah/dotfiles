#! /usr/bin/env bash
# papis-short-help: Get pdf and bibtex from doi identificator

log() {
  echo "$(basename $0)> $@"
}

if [[ $1 = "-h" ]]; then
  echo "Get pdf and bibtex from doi identificator"
  exit 0
fi

sciget=sciget.sh

pdf_output=output.pdf
doi="$1"
shift
log "Doi: ${doi}"
[[ -n $@ ]] && log "Other args: $@"

${sciget} ${doi}

if [[ ! $? = 0 ]]; then
  log "Something happened"
  exit 1
fi

set -x
papis ${PAPIS_VERBOSE} -l ${PAPIS_LIB} add ${pdf_output} --from-doi ${doi} $@ --edit --confirm
set +x
